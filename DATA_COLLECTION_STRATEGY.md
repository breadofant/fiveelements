# MBTI × 사주 데이터 수집 전략

## 목표
1. **1차 목표**: 1000명 이상의 (MBTI, 생년월일, 인생 이벤트) 수집
2. **2차 목표**: MBTI vs 사주 오행 상관관계 분석 → 패턴 발견
3. **부가**: 수집 과정에서 사용자에게 "가치 있는 리포트" 제공 → 입소문 확산

---

## 수집 데이터 구조

### 필수 데이터
| 필드 | 타입 | 수집률 목표 | 용도 |
|------|------|------------|------|
| `mbti` | string | 100% | 서양 통계학 기준선 |
| `timestamp` | datetime | 100% | 트렌드 분석 |

### 선택 데이터
| 필드 | 타입 | 수집률 목표 | 용도 |
|------|------|------------|------|
| `birth_date` | date | 70% | 사주 오행 계산 (월령 가중) |
| `birth_time` | time | 30% | 정확한 시주 (2단계에서) |
| `events[]` | array | 50% | 인생 패턴 vs 운세 비교 |
| `events[].year` | int | - | 대운/세운 비교 |
| `events[].type` | enum | - | 이벤트 카테고리 (전직/연애/건강 등) |
| `events[].emotion` | int | - | 감정 강도 (-2~+2) |
| `events[].duration` | enum | - | 영향 기간 |

---

## 단계별 수집률 예측

### 현재 버전 (app.py)
```
MBTI 입력       100명
생년월일 입력    30명 (30% 이탈)
이벤트 1개 입력  10명 (66% 이탈)
이벤트 3개 입력   3명 (70% 이탈)
최종 제출         2명 (33% 이탈)
→ 전체 완료율: 2%
```

### 개선 버전 (app_v2_staged.py)
```
MBTI 입력       100명
1단계 리포트 확인 100명 (0% 이탈 - 즉시 보상)
생년월일 입력    70명 (30% 이탈 - "정확도 +40%" 유도)
2단계 리포트 확인 70명
이벤트 3개 입력  50명 (28% 이탈 - 프리셋으로 간소화)
최종 제출        48명 (4% 이탈)
→ 전체 완료율: 48%
```

**개선 효과: 24배 증가**

---

## 수집 데이터 품질 관리

### 1. 유효성 검증
```python
# birth_date 검증
- 범위: 1900-01-01 ~ 오늘
- 형식: YYYY-MM-DD (캘린더 위젯 사용 → 형식 오류 제로)

# events 검증
- 연도: birth_date.year ~ 현재 연도
- 중복 이벤트 허용 (같은 연도에 여러 사건 가능)
- 이벤트 타입: 프리셋 10개 중 선택 → 자유입력 불가 (노이즈 제거)
```

### 2. 이상치 탐지
```python
# 의심 패턴 (자동 플래깅)
- 같은 IP에서 10분 내 5회 이상 제출
- birth_date가 1900년대 초반 (100세 이상)
- 모든 이벤트의 emotion = +2 또는 -2 (극단적 반응)
- events 개수 > 10개 (과도한 입력)

# 처리: 별도 테이블 격리 후 수동 검토
```

### 3. 개인정보 보호
```python
# 저장하지 않는 것
- IP 주소 (해시값만 저장)
- 닉네임 (통계 표시용, 선택)
- 정확한 출생 시각 (현재 버전에서는 월/일만)

# 익명화
- user_id: UUID 자동 생성
- birth_date → birth_year_month만 저장 (일자 버림)
```

---

## 바이럴 루프 설계

### 1차 루프: 결과 공유
```
사용자 A가 리포트 받음
    ↓
"친구와 비교하기" 링크 공유 (자동 생성)
    ↓
친구 B가 링크 클릭 → MBTI 입력 → 리포트 받음
    ↓
A와 B의 "궁합 분석" 페이지 자동 생성
    ↓
A, B 모두에게 알림 → 앱 재방문
```

### 2차 루프: 잠금 해제
```
기본 리포트: 무료
고급 리포트(대운/세운): 친구 3명 초대 or 500원

→ 초대 > 결제 비율 예상: 70:30
→ 1000명 유입 시 700명 추가 유입
```

### 3차 루프: 커뮤니티
```
"같은 타입 모임" 게시판
- ENTP × 목화형 모임 (12명)
- ISTJ × 토금형 모임 (8명)

→ 유저 간 자발적 공유 → 오가닉 유입
```

---

## A/B 테스트 계획

### 변수 1: 프로그레스바 위치
- A안: 상단 고정
- B안: 각 단계마다 표시
→ 측정: 3단계 도달률

### 변수 2: 중간 리포트 타이밍
- A안: MBTI 입력 직후 즉시
- B안: 3초 로딩 애니메이션 후
→ 측정: 2단계 진입률

### 변수 3: 이벤트 입력 UI
- A안: 프리셋 10개 (현재)
- B안: 프리셋 5개 + "기타" 자유입력
→ 측정: 이벤트 평균 개수

---

## 수집 데이터 활용 로드맵

### Phase 1: 기술 통계 (N=100)
- MBTI별 오행 분포
- 연도별 이벤트 트렌드 (2020년 전후 비교)
- 감정 강도 평균/분산

### Phase 2: 상관 분석 (N=500)
- MBTI vs 사주 오행 카이제곱 검정
- 이벤트 타입 × 오행 조합 패턴
- "전직" 이벤트와 목(木) 에너지 상관계수

### Phase 3: 예측 모델 (N=1000+)
- "2025년 당신에게 일어날 일" 확률 모델
- MBTI + 사주 + 과거 이벤트 → 미래 이벤트 타입 예측
- 정확도 vs 점성술 비교 (벤치마크)

### Phase 4: 논문/리포트 (N=2000+)
- "MBTI와 사주 오행의 교차 타당도 연구"
- Medium/브런치 포스팅 → 언론 보도 유도
- 백서 PDF 판매 (1만원) → 수익화

---

## 기술 스택 추천

### 현재 (MVP)
- **Frontend**: Streamlit
- **Backend**: Google Sheets (gspread) or Supabase
- **배포**: Streamlit Cloud (무료)

### 확장 단계 (N>500)
- **DB**: Supabase (PostgreSQL) - 관계형 쿼리 필수
- **분석**: Jupyter Notebook + pandas/seaborn
- **대시보드**: Streamlit 별도 앱 (admin용)

### 상용화 단계 (N>2000)
- **Frontend**: Next.js (SEO/공유 최적화)
- **Backend**: Supabase + Edge Functions
- **결제**: Stripe (고급 리포트 판매)
- **푸시**: SendGrid (이메일 알림)

---

## 예상 타임라인

| 단계 | 기간 | 목표 |
|------|------|------|
| MVP 배포 | 1일 | app_v2_staged.py 완성 |
| 초기 유입 | 1주 | N=50 (지인 공유) |
| 1차 개선 | 2주 | A/B 테스트 → 완료율 60% 달성 |
| 바이럴 시작 | 1개월 | N=300 (친구 초대 루프 작동) |
| 통계 분석 | 2개월 | N=1000, 상관 분석 리포트 발행 |
| 수익화 시작 | 3개월 | 고급 리포트 판매 or 광고 |

---

## 윤리 고려사항

### 투명성
- 수집 목적 명시: "MBTI vs 사주 상관관계 연구"
- 익명 통계만 공개 (개인 식별 불가)

### 사주 해석 한계
- "통계 기반 재미 목적" 명시 (의학/법률 조언 아님)
- "정확도 XX%" 수치 노출 → 맹신 방지

### 데이터 보관
- 사용자 요청 시 삭제 (GDPR 준수)
- 연구 종료 후 6개월 내 폐기

---

## 참고: 경쟁 사례 분석

| 서비스 | 접근 | 수집 데이터 | 수익 모델 |
|--------|------|------------|----------|
| 16Personalities | MBTI만 | 60문항 테스트 | 유료 리포트 |
| 만세력앱 | 사주만 | 생년월일시 | 광고 |
| Co-Star | 서양점성술 | 생년월일시+위치 | 구독 |
| **본 프로젝트** | MBTI×사주 | MBTI+생년월일+이벤트 | 초대 잠금 해제 |

**차별점**: 인생 이벤트 수집 → 실증 데이터로 정확도 검증 가능
